"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1096],{495:(L,y,s)=>{s.d(y,{Z:()=>T});var p=s(2340),Z=s(8256),r=s(529),v=s(7053);let T=(()=>{class h{constructor(t,_){this.http=t,this.authService=_,this.service="/transfers"}getTransfer(t){return this.http.get(`${p.N.apiBaseUrl}${this.service}/${t}`)}addTransfer(t){return this.http.post(`${p.N.apiBaseUrl}${this.service}`,t)}updateTransfer(t,_){return this.http.put(`${p.N.apiBaseUrl}${this.service}/${t}`,_)}deleteTransfer(t){return this.http.delete(`${p.N.apiBaseUrl}${this.service}/${t}`)}}return h.\u0275fac=function(t){return new(t||h)(Z.LFG(r.eN),Z.LFG(v.$))},h.\u0275prov=Z.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},1096:(L,y,s)=>{s.r(y),s.d(y,{SupplierPageModule:()=>E});var p=s(6895),Z=s(433),r=s(4556),v=s(3329),T=s(2846),h=s(655),e=s(590),t=s(8256),_=s(6177),S=s(5970),M=s(495);let A=(()=>{class i{transform(n,a){return a&&n?i.filter(n,a):n}static filter(n,a){const f=a.toLowerCase();function m(g,G){for(let P in g)if(null!==g[P]&&null!=g[P]&&("object"==typeof g[P]&&m(g[P],G)||g[P].toString().toLowerCase().includes(f)))return!0;return!1}return n.filter(function(g){return m(g,a)})}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275pipe=t.Yjl({name:"filter",type:i,pure:!1}),i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),b=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({}),i})();function J(i,u){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.Oqu(null==n.supplier?null:n.supplier.name)}}function C(i,u){if(1&i){const n=t.EpF();t.ynx(0),t.TgZ(1,"ion-fab",7),t.NdJ("click",function(){t.CHM(n);const f=t.oxw();return t.KtG(f.onAdd())}),t.TgZ(2,"ion-fab-button",8),t._UZ(3,"ion-icon",9),t.qZA(),t.TgZ(4,"span",10),t._uU(5,"Add button"),t.qZA()(),t.BQk()}2&i&&(t.xp6(1),t.Q6J("edge",!0))}function Y(i,u){if(1&i){const n=t.EpF();t.ynx(0),t.TgZ(1,"ion-item-sliding",13)(2,"ion-item",15),t.NdJ("click",function(){const m=t.CHM(n).$implicit,g=t.oxw(2);return t.KtG(g.goToItemDetails(m))}),t.TgZ(3,"ion-grid",16)(4,"ion-row",17)(5,"ion-col",18)(6,"p"),t._uU(7),t.qZA()(),t.TgZ(8,"ion-col",19)(9,"ion-grid",13)(10,"ion-row",20)(11,"ion-col",21)(12,"div")(13,"ion-text",22),t._uU(14),t.qZA()(),t.TgZ(15,"div",23)(16,"ion-text",24),t._uU(17),t.qZA()()(),t.TgZ(18,"ion-col",25)(19,"div",26),t._uU(20," Items: "),t.TgZ(21,"ion-text",27),t._uU(22),t.qZA()(),t.TgZ(23,"div",28)(24,"ion-text",29),t._uU(25),t.ALo(26,"date"),t.qZA()()()()()()()()(),t.TgZ(27,"ion-item-options",30)(28,"ion-item-option",31),t.NdJ("click",function(){const m=t.CHM(n).$implicit,g=t.oxw(2);return t.KtG(g.onEdit(m))}),t._UZ(29,"ion-icon",32),t.qZA(),t.TgZ(30,"ion-item-option",33),t.NdJ("click",function(){const m=t.CHM(n).$implicit,g=t.oxw(2);return t.KtG(g.onDelete(m))}),t._UZ(31,"ion-icon",34),t.qZA()()(),t.BQk()}if(2&i){const n=u.$implicit;t.xp6(7),t.hij(" ",n.branch.branch_code,""),t.xp6(7),t.hij("GT-",null==n?null:n.gt,""),t.xp6(3),t.hij("BT-",null==n?null:n.bt,""),t.xp6(5),t.Oqu(n.items.length),t.xp6(3),t.Oqu(t.Dn7(26,5,null==n?null:n.created_at,"shortDate","dd/MM/YY"))}}function U(i,u){if(1&i){const n=t.EpF();t.ynx(0),t.TgZ(1,"ion-searchbar",11),t.NdJ("ngModelChange",function(f){t.CHM(n);const m=t.oxw();return t.KtG(m.searchTerm=f)}),t.qZA(),t.ynx(2),t.TgZ(3,"div",12)(4,"ion-list",13),t.YNc(5,Y,32,9,"ng-container",14),t.ALo(6,"filter"),t.qZA()(),t.BQk()()}if(2&i){const n=t.oxw();t.xp6(1),t.Q6J("ngModel",n.searchTerm),t.xp6(4),t.Q6J("ngForOf",t.xi3(6,2,n.transfers,n.searchTerm))}}function l(i,u){1&i&&(t.TgZ(0,"div")(1,"div",4),t._UZ(2,"ion-img",35),t.TgZ(3,"h3",36),t._uU(4,"No Transfer Yet. Add new one."),t.qZA()()())}const o=[{path:"",component:(()=>{class i{constructor(n,a,f,m,g,G,P){this.activatedRoute=n,this.router=a,this.suppliersService=f,this.alertService=m,this.transferService=g,this.toastController=G,this.loadingController=P,this.id=1,this.isLoading=!1,this.searchTerm="",this.hasTransfer=!1}ngOnInit(){this.activatedRoute.paramMap.subscribe(n=>{let a=+n.get("id");a?(this.id=a,this.getAllTransfersOfSupplier(a)):this.returnHome()})}returnHome(){this.router.navigate(["/home"])}getAllTransfersOfSupplier(n){this.isLoading=!0,this.suppliersService.getSupplierTransfers(n).subscribe({next:a=>{a&&(this.isLoading=!1,this.supplier=a.supplier,this.transfers=a.transfers,this.hasTransfer=a.transfers.length<=0)},error:a=>{this.isLoading=!1,this.alertService.alertError(a.status,"No transfers from this supplier")}})}onEdit(n){this.router.navigate([`supplier/${this.id}/add-edit-transfer`],{state:{data:{action:"edit",transfer:n}}})}onDelete(n){return(0,h.mG)(this,void 0,void 0,function*(){console.log("Delete",n);const a=yield this.loadingController.create({message:`Deleting GT-${n.gt} ...`,spinner:"circles"});a.present(),this.transferService.deleteTransfer(n.id).pipe((0,e.P)()).subscribe({next:f=>(0,h.mG)(this,void 0,void 0,function*(){a.dismiss(),this.presentToast(n.gt),this.transfers=this.transfers.filter(m=>n.id!=m.id),this.transfers.length<=0&&(this.hasTransfer=!0)}),error:f=>(0,h.mG)(this,void 0,void 0,function*(){a.dismiss(),this.alertService.alertError(f.status,`Having trouble deleting GT-${n.gt}`)})})})}presentToast(n){return(0,h.mG)(this,void 0,void 0,function*(){yield(yield this.toastController.create({message:`GT-${n} was successfully deleted.`,duration:800,position:"bottom"})).present()})}goToItemDetails(n){this.router.navigate([`supplier/${this.id}/transfer/${n.id}`],{state:{transfer:n}})}onAdd(){this.router.navigate([`supplier/${this.id}/add-edit-transfer`],{state:{data:{transfer:{brand:this.supplier.brand,supplier_id:this.id},action:"add"}}})}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(v.gz),t.Y36(v.F0),t.Y36(_.R),t.Y36(S.c),t.Y36(M.Z),t.Y36(r.yF),t.Y36(r.HT))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-supplier"]],decls:15,vars:5,consts:[["color","primary",1,"ion-text-center","ion-no-padding","ion-text-uppercase"],[4,"ngIf"],[1,"ion-margin-top"],[1,"container","ion-margin-top"],[1,"container"],["type","button","size","large","expand","block","color","secondary","fill","solid","strong","true","routerLink","/home",3,"disabled"],["color","light",1,"ion-text-capitalize"],["slot","fixed","size","large","vertical","top","horizontal","end",3,"edge","click"],["type","button"],["name","add"],[1,"sr-only"],["color","light","placeholder","Search","debounce","500","animated","true",1,"ion-margin-top","searchbar-input-container","ion-no-padding","ion-padding-vertical",3,"ngModel","ngModelChange"],[1,"ion-no-padding","ion-no-margin"],[1,"ion-no-padding"],[4,"ngFor","ngForOf"],["button","","detail","true",1,"ion-margin-top","ion-no-padding",3,"click"],[1,"transfer"],[1,"ion-justify-content-between","transfer","ion-align-items-center"],["size","3",1,"transfer__items"],["size","9"],[1,"ion-justify-content-between","transfer__details"],["size","5"],["color","dark",1,"ion-no-margin"],[1,"ion-no-margin","ion-margin-top"],["color","dark"],["size","6"],[1,"ion-text-end"],["color","light"],[1,"ion-no-margin","ion-margin-top","ion-text-end"],["color","secondary"],["side","end",1,"ion-margin-top","ion-no-margin"],["color","primary",3,"click"],["slot","icon-only","name","create-outline"],["color","danger","expandable","",3,"click"],["slot","icon-only","name","trash"],["src","../assets/images/sorry-item-not-found.png","alt","no found item",1,"ion-margin-top"],[1,"ion-text-center"]],template:function(n,a){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),t.YNc(3,J,2,1,"span",1),t.qZA()()(),t.TgZ(4,"ion-content",2),t.YNc(5,C,6,1,"ng-container",1),t.TgZ(6,"div",3),t.YNc(7,U,7,5,"ng-container",1),t.YNc(8,l,5,0,"div",1),t.qZA()(),t.TgZ(9,"ion-footer")(10,"ion-toolbar")(11,"div",4)(12,"ion-button",5)(13,"ion-text",6),t._uU(14," Back "),t.qZA()()()()()),2&n&&(t.xp6(3),t.Q6J("ngIf",!a.isLoading),t.xp6(2),t.Q6J("ngIf",!a.isLoading),t.xp6(2),t.Q6J("ngIf",!a.isLoading&&(null==a.transfers?null:a.transfers.length)>0),t.xp6(1),t.Q6J("ngIf",a.hasTransfer),t.xp6(4),t.Q6J("disabled",a.isLoading))},dependencies:[p.sg,p.O5,Z.JJ,Z.On,r.YG,r.wI,r.W2,r.IJ,r.W4,r.fr,r.jY,r.Gu,r.gu,r.Xz,r.Ie,r.u8,r.IK,r.td,r.q_,r.Nd,r.VI,r.yW,r.wd,r.sr,r.j9,r.YI,v.rH,p.uU,A]}),i})()},{path:"transfer/:id",loadChildren:()=>Promise.resolve().then(s.bind(s,7776)).then(i=>i.TransferPageModule),canActivate:[T.a]},{path:"add-edit-transfer",loadChildren:()=>s.e(8347).then(s.bind(s,8347)).then(i=>i.AddEditTransferPageModule),canActivate:[T.a]}];let c=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[v.Bz.forChild(o),v.Bz]}),i})();var d=s(7776),N=s(6531);let E=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.ez,Z.u5,r.Pc,c,d.TransferPageModule,N.B,b]}),i})()},7776:(L,y,s)=>{s.r(y),s.d(y,{TransferPageModule:()=>U});var p=s(6895),Z=s(433),r=s(4556),v=s(3329),T=s(655),h=s(590),e=s(8256),t=s(495),_=s(5970),S=s(6531);function M(l,x){if(1&l&&(e.TgZ(0,"ion-title",6),e._uU(1),e.qZA()),2&l){const o=e.oxw();e.xp6(1),e.hij("GT-",null==o.transfer?null:o.transfer.gt,"")}}function A(l,x){if(1&l&&(e.TgZ(0,"div")(1,"ion-grid",24)(2,"ion-row",15)(3,"ion-col",25),e._uU(4),e.qZA(),e.TgZ(5,"ion-col",18)(6,"ion-text",26),e._uU(7),e.qZA()(),e.TgZ(8,"ion-col",19)(9,"ion-text",26),e._uU(10),e.qZA()()()()()),2&l){const o=x.$implicit,c=x.index;e.xp6(4),e.hij(" ",c+1," "),e.xp6(3),e.hij(" ",o.lot,""),e.xp6(3),e.hij(" ",o.qty,"")}}function b(l,x){if(1&l){const o=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"ion-card")(3,"ion-card-content"),e._UZ(4,"ngx-barcode",9),e.qZA()()(),e.TgZ(5,"ion-card",10)(6,"ion-card-header",11)(7,"ion-card-title"),e._uU(8,"From: "),e.TgZ(9,"ion-text",12),e._uU(10),e.qZA()(),e.TgZ(11,"ion-card-subtitle"),e._uU(12),e.ALo(13,"date"),e.qZA()(),e.TgZ(14,"ion-card-content")(15,"div",13)(16,"ion-grid",14)(17,"ion-row",15)(18,"ion-col",16)(19,"ion-text",17),e._uU(20," ITEMS "),e.qZA()(),e.TgZ(21,"ion-col",18)(22,"ion-text",17),e._uU(23," lot "),e.qZA()(),e.TgZ(24,"ion-col",19)(25,"ion-text",17),e._uU(26," qty"),e.qZA()()()(),e.YNc(27,A,11,3,"div",20),e.qZA(),e.TgZ(28,"ion-grid",14)(29,"ion-row",15)(30,"ion-col",21)(31,"ion-button",22),e.NdJ("click",function(){e.CHM(o);const d=e.oxw();return e.KtG(d.onEdit(d.transfer))}),e.TgZ(32,"ion-text",5),e._uU(33," Edit "),e.qZA()()(),e.TgZ(34,"ion-col",21)(35,"ion-button",23),e.NdJ("click",function(){e.CHM(o);const d=e.oxw();return e.KtG(d.onDelete(d.transfer))}),e.TgZ(36,"ion-text",5),e._uU(37," Delete "),e.qZA()()()()()()()()}if(2&l){const o=e.oxw();e.xp6(4),e.Q6J("bc-height",90)("bc-value","NA"+(null==o.transfer||null==o.transfer.branch?null:o.transfer.branch.branch_code)+"-BT-"+(null==o.transfer?null:o.transfer.bt))("bc-display-value",!0),e.xp6(6),e.hij("",null==o.transfer.branch?null:o.transfer.branch.name," Warehouse"),e.xp6(2),e.hij("Date: ",e.Dn7(13,6,null==o.transfer?null:o.transfer.created_at,"shortDate","dd/MM/YYYY"),""),e.xp6(15),e.Q6J("ngForOf",null==o.transfer?null:o.transfer.items)}}const C=[{path:"",component:(()=>{class l{constructor(o,c,d,N,E,i,u){this.activatedRoute=o,this.router=c,this.transferService=d,this.alertService=N,this.loadingController=E,this.toastController=i,this.location=u,this.isLoading=!1}ngOnInit(){this.activatedRoute.paramMap.subscribe(o=>{if(this.id=+o.get("id"),!this.router.getCurrentNavigation().extras.state)return this.isLoading=!0,void this.alertService.alertError(404,"No transfer found or transfer id mismatch.");this.transfer=this.router.getCurrentNavigation().extras.state.transfer})}getTransfer(o){return(0,T.mG)(this,void 0,void 0,function*(){this.isLoading=!0;const c=yield this.loadingController.create({message:"Loading transfer..",spinner:"circles"});c.present(),this.transferService.getTransfer(o).pipe((0,h.P)()).subscribe({next:d=>(0,T.mG)(this,void 0,void 0,function*(){this.isLoading=!1,yield c.dismiss(),d||(this.isLoading=!0,this.alertService.alertError(400,"Bad request")),this.transfer=d}),error:d=>(0,T.mG)(this,void 0,void 0,function*(){this.isLoading=!0,yield c.dismiss(),this.alertService.alertError(d.status,d.statusText)})})})}returnHomePage(){this.router.navigate(["/home"])}onEdit(o){this.router.navigate([`supplier/${this.id}/add-edit-transfer`],{state:{data:{action:"edit",transfer:o}}})}onDelete(o){return(0,T.mG)(this,void 0,void 0,function*(){const c=yield this.loadingController.create({message:`Deleting GT-${o.gt} ...`,spinner:"circles"});c.present(),this.transferService.deleteTransfer(o.id).pipe((0,h.P)()).subscribe({next:d=>(0,T.mG)(this,void 0,void 0,function*(){c.dismiss(),d?(this.router.navigate([`/supplier/${o.supplier_id}`]),this.presentToast(o.gt)):this.alertService.alertError(400,"Delete Transfer failed")}),error:d=>(0,T.mG)(this,void 0,void 0,function*(){c.dismiss(),this.alertService.alertError(d.status,d.statusText)})})})}presentToast(o){return(0,T.mG)(this,void 0,void 0,function*(){yield(yield this.toastController.create({message:`GT-${o} was successfully deleted.`,duration:800,position:"middle"})).present()})}}return l.\u0275fac=function(o){return new(o||l)(e.Y36(v.gz),e.Y36(v.F0),e.Y36(t.Z),e.Y36(_.c),e.Y36(r.HT),e.Y36(r.yF),e.Y36(p.Ye))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-transfer"]],decls:11,vars:4,consts:[["color","primary","class","ion-text-center ion-no-padding",4,"ngIf"],[1,"ion-margin-top"],["class","container",4,"ngIf"],[1,"container","ion-no-margin"],["type","button","size","large","expand","block","color","secondary","fill","solid","strong","true",3,"routerLink","disabled"],["color","light",1,"ion-text-capitalize"],["color","primary",1,"ion-text-center","ion-no-padding"],[1,"container"],[1,"barcode-container"],["bc-element-type","img",1,"ngx-barcode",3,"bc-height","bc-value","bc-display-value"],[1,"ion-no-margin","ion-margin-vertical"],[1,"ion-no-margin"],["color","tertiary",1,"fw-bold"],[1,"items"],[1,"ion-no-padding"],[1,"ion-justify-content-between","ion-no-padding"],["size","4"],["color","secondary",1,"items__title"],["size","4",1,"ion-text-uppercase"],["size","4",1,"ion-text-uppercase","ion-text-end"],[4,"ngFor","ngForOf"],["size","5"],["size","large","expand","block",1,"ion-margin-end",3,"click"],["size","large","expand","block","color","danger",3,"click"],[1,"ion-no-padding","ion-margin-vertical"],["size","4",1,"item__number"],["color","primary"]],template:function(o,c){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar"),e.YNc(2,M,2,1,"ion-title",0),e.qZA()(),e.TgZ(3,"ion-content",1),e.YNc(4,b,38,10,"div",2),e.qZA(),e.TgZ(5,"ion-footer")(6,"ion-toolbar")(7,"div",3)(8,"ion-button",4)(9,"ion-text",5),e._uU(10," Back "),e.qZA()()()()()),2&o&&(e.xp6(2),e.Q6J("ngIf",!c.isLoading),e.xp6(2),e.Q6J("ngIf",!c.isLoading),e.xp6(4),e.MGl("routerLink","/supplier/",null==c.transfer?null:c.transfer.supplier_id,""),e.Q6J("disabled",c.isLoading))},dependencies:[p.sg,p.O5,r.YG,r.PM,r.FN,r.Zi,r.tO,r.Dq,r.wI,r.W2,r.fr,r.jY,r.Gu,r.Nd,r.yW,r.wd,r.sr,r.YI,v.rH,S.y,p.uU]}),l})()}];let Y=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[v.Bz.forChild(C),v.Bz]}),l})(),U=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[p.ez,Z.u5,r.Pc,Y,S.B]}),l})()}}]);